# Hyperliquid On-chain Futures Analytics

**온체인 선물거래소 Hyperliquid의 BTC Perpetual 데이터를 수집, 분석, 시각화하는 프로젝트**  
- 모든 buyer/seller의 지갑주소 추적  
- 유저별 현재 포지션 및 청산 예상 가격 분석  
- Coinglass 청산 히트맵과 유사한 시각화 + 리더보드 제공  

---

## 📌 프로젝트 목표

### 왜 이 프로젝트를 하는가?
- 기존 Coinglass 같은 플랫폼은 **중앙화 거래소(CEX) 데이터**에 기반
- **Hyperliquid**는 온체인 기반으로 모든 거래 데이터를 오픈소스로 제공 → 투명한 분석 도구를 만들 수 있음

### 최종 목표
- Hyperliquid BTC Perpetual 거래의 모든 유저 포지션 수집
- 청산 가격대별 시각화 (청산 히트맵)
- 상위 트레이더들의 포지션 리더보드 제공

### MVP 범위
1. BTC 선물 거래 데이터 수집 & DB 저장  
2. 기본 청산 히트맵 시각화  
3. 리더보드 페이지  

---

## ⚙️ 요구사항 정의

### 기능 요구사항
- **데이터 수집**
  - WebSocket → Hyperliquid 거래 체결 이벤트 실시간 구독
  - buyer/seller 주소, 포지션 사이즈, 가격 기록  

- **데이터 가공**
  - 각 지갑별 현재 포지션 유지 (롱/숏, 규모, 평균 진입가, 청산가 추정치)
  - 유저별 포지션 총합 집계  

- **시각화**
  - 청산 히트맵 (가격대별 청산 물량 예상)
  - 리더보드 (상위 포지션 보유 지갑 순위)

- **웹페이지**
  - 실시간 차트 업데이트
  - 반응형 UI (모바일/PC 지원)

### 비기능 요구사항
- 성능: 초당 수십~수백 건 거래처리 가능해야 함
- 확장성: BTC → ETH, SOL 등 다른 코인 확장 가능
- 보안: DB에는 지갑주소 외 민감정보 없음
- 배포: AWS/클라우드 서버 기반 배포

---

## 🏗️ 아키텍처 설계

### 데이터 수집 레이어
- Rust / Node.js → WebSocket → PostgreSQL (or MySQL)

### DB 모델링
- **trades** : 체결 데이터 기록용  
- **positions** : 각 지갑의 최신 포지션 상태  
- **leaderboard** : 집계 결과 캐시  

### 백엔드 API
- REST / GraphQL → 프론트에 데이터 제공  

### 프론트엔드
- React + (TradingView Charting Library / Recharts / D3.js)  
- 청산 히트맵 & 리더보드 구현  

---

## 🎨 프로토타입 & UX 기획

- 홈화면 → BTC 청산 히트맵  
- 탭1: 차트 (청산 히트맵)  
- 탭2: 리더보드 (상위 포지션 보유 유저)  

**사용자 플로우**
1. 접속 → 실시간 차트 확인  
2. 특정 가격대 클릭  
3. 관련 유저 주소 및 포지션 정보 확인  

---

## 🛠️ 기술 스택

- **데이터 수집**: Rust (성능/안정성) / Node.js (빠른 개발)  
- **DB**: PostgreSQL (대용량 시계열 데이터 적합)  
- **백엔드**: Express.js / Actix-web (Rust)  
- **프론트엔드**: React + Recharts/Chart.js/TradingView  
- **배포**: AWS EC2 + Docker + Nginx  

---

## 🚀 로드맵 (Milestone)

- **1주차**: Hyperliquid WebSocket 연결 → BTC 체결 데이터 저장 (trades 테이블)  
- **2주차**: DB 기반 지갑별 포지션 계산 로직 구현 (positions 테이블)  
- **3주차**: 청산가 추정 알고리즘 구현 → 가격대별 청산 규모 집계  
- **4주차**: 프론트엔드 기본 차트 구현 (히트맵)  
- **5주차**: 리더보드 페이지 추가  
- **6주차**: 배포 & 테스트  

---

## ⚠️ 리스크 & 고려사항
- Hyperliquid 데이터 구조 변경 가능성 → WebSocket 스키마 모니터링 필요  
- 데이터량 폭증 → 장기 보관 정책 (압축, 파티셔닝)  
- 실시간 처리 속도 → Redis 캐시 고려  
- 법적 이슈 없음 (온체인 공개데이터만 활용)  

---

